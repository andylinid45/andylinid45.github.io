<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Production | Andy Lin]]></title>
  <link href="http://andylinid45.github.io/blog/categories/production/atom.xml" rel="self"/>
  <link href="http://andylinid45.github.io/"/>
  <updated>2015-01-20T16:05:51+08:00</updated>
  <id>http://andylinid45.github.io/</id>
  <author>
    <name><![CDATA[Andy]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Postfix in Ubuntu]]></title>
    <link href="http://andylinid45.github.io/blog/2014/12/22/postfix-in-ubuntu/"/>
    <updated>2014-12-22T21:21:14+08:00</updated>
    <id>http://andylinid45.github.io/blog/2014/12/22/postfix-in-ubuntu</id>
    <content type="html"><![CDATA[<h3>outgoing mail</h3>

<p><code>
sudo apt-get install postfix
</code></p>

<h3>test outgoing mail</h3>

<p><code>
echo "My test email sent from sendmail" | /usr/sbin/sendmail  your_gmail@gmail.com
</code></p>

<h3>incomming mail</h3>

<p>setup MX record in DNS, point to your VPS ip or domain name</p>

<h3>test MX record</h3>

<p><code>
dig mx your_domain.com
</code></p>

<p>and now you can send mail to <a href="&#109;&#x61;&#105;&#x6c;&#116;&#111;&#58;&#121;&#x6f;&#x75;&#x72;&#x5f;&#x61;&#x63;&#x63;&#x6f;&#x75;&#x6e;&#116;&#95;&#x6e;&#x61;&#109;&#x65;&#x5f;&#x69;&#x6e;&#95;&#x76;&#x70;&#x73;&#x40;&#x79;&#x6f;&#117;&#x72;&#95;&#100;&#x6f;&#x6d;&#97;&#x69;&#x6e;&#x2e;&#99;&#111;&#x6d;">&#x79;&#111;&#x75;&#114;&#x5f;&#x61;&#99;&#99;&#111;&#x75;&#x6e;&#116;&#95;&#x6e;&#x61;&#x6d;&#101;&#x5f;&#x69;&#x6e;&#x5f;&#x76;&#112;&#115;&#x40;&#x79;&#x6f;&#x75;&#x72;&#95;&#100;&#x6f;&#109;&#x61;&#x69;&#x6e;&#46;&#x63;&#x6f;&#109;</a> , and other mail address will be rejected</p>

<h3>add mail forward to your gmail (usefull for small business if you don&rsquo;t want to buy &ldquo;Google App&rdquo; for managing your mail box)</h3>

<p><code>
sudo nano /etc/postfix/main.cf
</code></p>

<p>add
<code>
virtual_alias_maps = hash:/etc/postfix/virtual
</code></p>

<p><code>
sudo nano  /etc/postfix/virtual
</code>
add
<code>
your_new_mail_address@your_domain.com  your_gmail@gmail.com
</code></p>

<p>and restart at last
<code>
sudo postmap /etc/postfix/virtual
sudo /etc/init.d/postfix restart
</code></p>

<p>log file in
<code>
/var/log/mail.err
/var/log/mail.log
</code></p>

<h3>add a new domain mail box to your vps</h3>

<p><code>
sudo nano /etc/postfix/main.cf
</code>
add the domain to
<code>
mydestination
</code></p>

<p>also modify the /etc/postfix/virtual to add mail address like above, so your mail will forward to your gmail rather than go to you VPS local file</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ubuntu 14.04 Server Initial]]></title>
    <link href="http://andylinid45.github.io/blog/2014/10/27/ubuntu-14-dot-04-server-initial/"/>
    <updated>2014-10-27T00:01:07+08:00</updated>
    <id>http://andylinid45.github.io/blog/2014/10/27/ubuntu-14-dot-04-server-initial</id>
    <content type="html"><![CDATA[<p>login as root
```
adduser deploy</p>

<p>echo &lsquo;deploy ALL=(ALL) NOPASSWD: ALL&rsquo; |sudo tee -a /etc/sudoers</p>

<p>nano /etc/ssh/sshd_config</p>

<h1>edit two lines</h1>

<p>PermitRootLogin no
PasswordAuthentication no</p>

<p>service ssh restart  # do not use , no use /etc/init.d/ssh  restart</p>

<p>sudo apt-get update
sudo apt-get upgrade
```</p>

<p>in local
<code>
ssh-copy-id deploy@ip
</code></p>
]]></content>
  </entry>
  
</feed>
